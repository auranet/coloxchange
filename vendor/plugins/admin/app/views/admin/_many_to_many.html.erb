<table class="many-to-many"><tr valign="top"><td class="bold"><%= "Related " if model_name == @model_name %><%= model_name %>:<% unless model_name == @model_name %><div class="quiet"><%= link_to "Add",{:action => "edit",:model => class_name.to_s.singularize,:id => nil,:external => "yes",:many => "yes"},:class => "external",:rel => reflection_name %> &middot; <%= link_to "Browse",{:action => "browse",:model => class_name} %></div><% end %></td><td><% if size > 0 %><% autocomplete = size > 24 %><%= render :partial => "many_to_many_#{autocomplete ? "autocomplete" : "checkboxes"}",:locals => {:class_name => class_name,:instances => autocomplete ? nil : model_class.find(:all,:order => model_class.admin_order).without(@instance),:reflection_name => reflection_name,:selected => autocomplete ? model_class.find(selected) : selected} %><% else %>No <%= model_name.pluralize.downcase %> were found!<% end %></td></tr></table>